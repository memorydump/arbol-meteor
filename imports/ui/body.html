

<body>
  <div class="container">
    <header>
      <h1>A R B O L</h1>
    </header>
  </div>

  <div id="web3-waiting">
    <h3>Waiting for Web3 to load.</h3>
  </div>
  <div id="no-web3" style="display:none">
    <h3>No Web3, consider using MetaMask: </h3>
    <a href="https://metamask.io/">
      <img src="/images/metamask-link.png" alt="Download MetaMask" height="120">
    </a>
  </div>
 <div id="web3-onload" style="display:none">
   {{> navigation}}
</div>
</body>

<template name="navigation">
  <!-- Use `name` to add a custom class to the outer container -->
  {{#basicTabs name="newTabs" tabs=tabs}}
    <!--
      There are two ways to define content for your tabs:

      1. Wrap each tabbed section in a blank `<div></div>`.
         Sections must correspond with the order of the tabs you specified.

      2. Wrap each tabbed section in the provided block helper (RECOMMENDED!).
         `{{#tabContent slug="nameOfSlug"}} ... {{/tabContent}}`
         These can be defined in any order you like.
    -->

    <!-- "OPEN PROTECTIONS" TAB -->
    {{#tabContent slug="open"}}
      All open protections are displayed here in a table:
      {{> openProtectionsTable}}
    {{/tabContent}}

    <!-- "CREATE A PROTECTION" TAB -->
    {{#tabContent slug="create"}}
      Select the options for the protection you want to create and click create. Make sure you have enough ETH in your wallet, and if you are selling a protection, make sure you have enough CROP in your wallet as well.
      {{> formNewProtection}}
    {{/tabContent}}

    <!-- "MY PROTECTIONS" TAB -->
    {{#tabContent slug="mine"}}
      All of your protections are displayed here in a table:
      {{> myProtectionsTable}}
    {{/tabContent}}
  {{/basicTabs}}
</template>

<!-- TEMPLATES FOR SORTABLE TABLE -->

<template name="sortableRows">
  <tr>
    {{#if isEqual type "headerRow"}}
      {{#each column}}
        <th> {{name}} </th>
      {{/each}}
    {{else if isEqual type "bodyRow"}}
      {{#each column}}
        <td>
          {{#if isEqual type "text"}}
            {{name}}
          {{else if isEqual type "num"}}
            {{name}}
          {{else if isEqual type "button"}}
            {{{button}}}
          {{/if}}
        </td>
      {{/each}}
    {{/if}}
  </tr>
</template>

<!-- TEMPLATES FOR "OPEN PROTECTIONS" -->

<template name="openProtectionsTable">
  <div class="wrapper loading">
    <table id="openProtections" class="tablesorter">
      <thead>
        {{#each headerData}}
          {{> sortableRows}}
        {{/each}}
      </thead>
      <tbody>
        {{#each bodyData}}
          {{> sortableRows}}
        {{/each}}
      </tbody>
    </table>
    <div class="loader"></div>
  </div>
</template>

<!-- TEMPLATES FOR "CREATE A PROTECTION FORM" -->

<template name="formNewProtection">
  <form class="new-protection">
    <table>
      {{#each formNewProtection}}
        {{> elNewProtection}}
      {{/each}}
    </table>
    <input type="submit" value="Create Request">
  </form>
</template>

<template name="elNewProtection">
  <tr>
    <td>
      <div class="tooltip">
        {{title}}
        <span class="tooltiptext">{{tooltiptext}}</span>
      </div>
    </td>
    <td>
      {{#if isEqual type "date"}}
        <input type="{{type}}" id={{id}} name={{name}} class="date-picker" min={{minDate}}>
      {{else if isEqual type "number"}}
        <input type="{{type}}" name={{name}} step="0.0001" value="0" min="0">
      {{else if isEqual type "select"}}
        <select name={{name}}>
          <option value="" selected disabled hidden>Select {{article}} {{name}}</option>
          {{#each elOptions}}
            <option value={{value}}>{{text}}</option>
          {{/each}}
        </select>
      {{else if isEqual type "toggle"}}
        <label class="buy-sell"><input type="checkbox" id="toggle-buy-sell"><div class="slider round"><span class="buy">BUY</span><span class="sell">SELL</span></div></label>
      {{/if}}
    </td>
  </tr>
</template>

<!-- TEMPLATES FOR "MY PROTECTIONS" -->

<template name="myProtectionsTable">
  <table id="myProtections" class="tablesorter">
    <thead>
      {{#each headerData}}
        {{> sortableRows}}
      {{/each}}
    </thead>
    <tbody>
      {{#each bodyData}}
        {{> sortableRows}}
      {{/each}}
    </tbody>
  </table>
</template>
